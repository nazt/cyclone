{
  "name": "bitlash-commander",
  "description": "Web control panel builder for Arduino",
  "version": "0.0.9",
  "private": false,
  "preferGlobal": false,
  "author": {
    "name": "Bill Roy",
    "email": "bill@bitlash.net"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/billroy/bitlash-commander.git"
  },
  "bugs": {
    "url": "https://github.com/billroy/bitlash-commander/issues"
  },
  "licenses": {
    "type": "MIT",
    "url": "https://raw.github.com/billroy/bitlash-commander/master/LICENSE"
  },
  "main": "./index.js",
  "scripts": {
    "start": "forever start index.js",
    "stop": "forever stop index.js"
  },
  "bin": {
    "commander": "./index.js"
  },
  "dependencies": {
    "express": ">=3.0.3",
    "optimist": ">=0.3.5",
    "request": ">=2.12.0",
    "socket.io": ">=0.9.11",
    "shelljs": ">=0.0.8",
    "serialport": ">=1.0.8",
    "redis": ">=0.8.2"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  },
  "keywords": [
    "arduino",
    "bitlash",
    "control panel",
    "web control"
  ],
  "readme": "# Bitlash Commander\n\nBitlash Commander is a node.js web interface toolkit for Arduino.  It serves web pages containing buttons, sliders, and chart controls, easily customized, which trigger Bitlash scripts you specify to control the Arduino over the usb-serial link.  \n\nCommander includes a graphical panel editing environment suitable for bringing up simple control panels without any coding, as well as a hands-on Javascript/HTML page development environment with plenty of examples for deep customization.\n\nFor documentation please see the Bitlash Commander wiki: https://github.com/billroy/bitlash-commander/wiki\n\nHere are screenshots of some of the examples that ship with Commander:\n\n![Default Panel - one control for each available Arduino pin ](https://raw.github.com/billroy/bitlash-commander/master/public/images/screenshot-commander.png)\n\n![Panic Button - showing use of an SVG path as a button](https://raw.github.com/billroy/bitlash-commander/master/public/images/screenshot-panic.png)\n\n![Color Lab](https://raw.github.com/billroy/bitlash-commander/master/public/images/screenshot-colorlab.png)\n\n![You want Buttons?](https://raw.github.com/billroy/bitlash-commander/master/public/images/screenshot-buttons.png)\n\n![Button Groups?](https://raw.github.com/billroy/bitlash-commander/master/public/images/screenshot-buttongroups.png)\n\nHere is an overview of the architecture of Bitlash Commander:\n\n![Bitlash Commander Architecture](https://raw.github.com/billroy/bitlash-commander/master/public/images/commander-architecture.png)\n\nThe PC Serving and PC Viewing can be, and usually are, on the same PC; the server requires very modest system resources.\n\n\n## Installing Bitlash on the Arduino\n\nTo start, you need to upload Bitlash to the Arduino.  \n\nFirst, install the Bitlash library from GitHub into your Arduino library folder(see https://github.com/billroy/bitlash/wiki/install).\n\nSecond (after restarting the Arduino IDE), connect your arduino and perform these commands in the Arduino IDE:\n\n\tFile -> Examples -> bitlash -> bitlashdemo\n\tFile -> Upload\n\nThis wouldn't be a bad time to connect to Bitlash on the arduino using the Serial Monitor (at 57600 baud) and familiarize yourself with Bitlash a bit.  When you're done, close the Serial Monitor and continue here.\n\n## Installing Bitlash Commander on the PC\n\n# Install Prerequisites: node.js, git, build environment\n\nYou need node.js (http://nodejs.org) and optionally git (http://git-scm.com).  Do those installs, and return here.\n\nIt's a little easier to get the latest builds of Commander if you use the git method.  It's fine to proceed without git if you don't want the bleeding edge versions.\n\nYou also need a compiler and build environment for your platform so that the serial port driver will build successfully.  Follow the guidance for your platform here in the section titled \"To Install\" before proceeding: https://github.com/voodootikigod/node-serialport\n\n\n# Install Bitlash Commander\n\nOption 1: If you don't have git installed: in a new terminal window:\n\n\t$ npm install bitlash-commander\n\t$ cd node_modules/bitlash-commander\n\t$ node index.js\n\n\nOption 2: If you do have git installed: in a new terminal window:\n\n\t$ git clone http://github.com/billroy/bitlash-commander\n\t$ cd bitlash-commander\n\t$ npm install\n\t$ node index.js\n\n\nIn either case, open a web browser on localhost:3000 to see the default control panel.\n\nTo start the web server on a different port:\n\n\t$ node index.js -p 8080\n\nTo specify a serial port for the arduino you would start it this way:\n\n\t$ node index.js -s /dev/tty.usbserial-F00D2321\n\nWindows users will need to specify a com port using -s.  On Mac and Linux, the first usb arduino is used unless -s is specified.\n\nTo secure the server by requiring a login (edit the user/password table in index.js):\n\n\t$ node index.js -l\n\nFor help:\t\n\t\n\t$ node index.js --help\n\tUsage: node ./index.js [flags]\n\t\n\tOptions:\n\t  -p, --port        TCP port for the http server (3000)                    \n\t  -s, --serialport  port for usbserial arduino connection                  \n\t  -b, --baud        baud rate for usbserial arduino connection (57600)     \n\t  -c, --cache       load cached values on restart                          \n\t  -r, --redis       redis server url in redis-url format                   \n\t  -x, --rexec       set true to accept remote bitlash commands on socket.io\n\t  -l, --login       require a valid login to use the server                  [boolean]\n\t  -u, --update      allow HTTP updates via POST /update/:id/:value         \n\n\n## Customize\n\nCopy public/index.html to public/new.html and edit new.html to add your controls following the addButton / addSlider examples you will see there.  Then open new.html for testing:\n\n\thttp://localhost:3000/new.html\n\nButtons display the value returned by Bitlash in their label.  Make sure your script causes Bitlash to print the output you'd like displayed.\n\nThere are many options you can set on the Button and Slider object, though mostly the defaults should work for you.  See Button.init() and Slider.init().\n\n## The \"Script\" field\n\nThe script field of a control contains the Bitlash code you want executed when the button is pressed or the slider is moved.  The text of the script field is sent to Bitlash, and any reply from Bitlash is displayed by the control (if it's a Button).\n\nHere is an example that toggles pin 13 and returns the value of pin 13 by printing it:\n\n\t{script:'d13=!d13;print d13'}\n\n\n### Text substitution using Mustache\n\nYou can customize the script sent to Bitlash based on the current value of the control.\n\nHere is an example that sets analog output 5 to the current value of the slider and prints it back as a response message:\n\n\t{script:'print a5={{value}}'}\n\nYou can use any field of the control object in {{}}.\n\n\n## Pushing data from Bitlash\n\nIt is desirable to be able to update indicators on the control panel without action from the operator.  To do this, Bitlash Commander provides an upstream data channel from Bitlash to the controls on the various web pages open on the server.\n\nTo update a control using the upstream JSON channel you must know the control's id.  The easiest way is to assign one when you create the button in the .html file.  In this example from public/push.html, the button has the id 'millis':\n\n\tvar Panel = new ControlPanel({color:'turquoise'});\n\tPanel.addButton({id:'millis', x:100, y:100, w:250, text:'millis'});\n\nTo update this control from Bitlash you would print a line of this form from a repeating background function:\n\n\t{\"id\":\"millis\",\"value\":\"33861\"}\n\n...where 'id' is the id of the control, \"millis' in this case, and 'value' is the new value for the control.\n\nHere is a Bitlash utility function to properly format JSON output for any id and value.   Copy and paste this definition into your Bitlash so you can use it below:\n\n\tfunction update {printf(\"{\\\"id\\\":\\\"%s\\\",\\\"value\\\":\\\"%d\\\"}\\n\", arg(1), arg(2));};\n\nHere is an example of how to call update, and a startup function to trigger it every 1000 ms; copy and paste these, too:\n\n\tfunction pm { update(\"millis\", millis); }\n\tfunction startup {run pm,1000;}\n\nIf you copy and paste those functions to your Bitlash, you can open the \"push.html\" file in the distribution to see the millis counter update in action.\n\n\thttp://localhost:3000/push.html\n\n## Listening for control updates\n\nYou can implement side-effects (like playing sounds or updating secondary controls) by listening for control updates.  \n\nThe push example in the file public/push.html shows event listeners in use:\n\n\tvar Panel = new ControlPanel({color:'turquoise'});\n\n\tPanel.addButton({id:'millis', x:100, y:100, w:250, text:'millis', script:'print millis'});\n\tPanel.addButton({id:'clock',  x:100, y:180, w:250, text:'clock', script:''});\n\tPanel.addButton({id:'clock2', x:100, y:260, w:250, text:'clock2', script:''});\n\n\tPanel.controls['millis'].on('update', function(data) {\n\t\tPanel.controls['clock'].setValue(data.value);\n\t});\n\n\tPanel.controls['clock'].on('update', function(data) {\n\t\tPanel.controls['clock2'].setValue(data.value);\n\t});\n\n\n\n## To Do / Bugs\n\n- BUG: duplicated panel labels\n\n- BUG: groups need color for outside AND inside separate from button colors\n\tchildopts {}\n\n- BUG: buttons don't work on iPad\n\n- doc:\n\t- new frontpage \n\t- new install\n\t- commander sketch\t\n\t- -c and -u\n\t- ssl\n\n- BUG: path buttons get their w and h set: bug?\n\n- mustache-expand the label text\n\n- grid fill with small image is costly and does not adapt to grid size\n\t- try drawing the grid explicitly, at the grid size\n\n- commander page is too big for ipad\n\n- xy sliders\n\t- BUG: update channel can't handle xvalue, yvalue\n\t- recenter after command\n\t\t- rename to \"returnto\" and use the value provided as the reset point\n\t\t- easing instead of one big jump\n\n- bug: chart svg doesn't update color on a panel stroke change\n\n- bug: dragging button doesn't drag repeat indicator\n\n- panel label handling has problems\n\tlabel should be called text; get rid of label\n\n- button group\n\t- bug: create a group of round buttons in panel editor: buttons don't show\n\t- bug: grouped items should show the parent's menu\n\n- thumbnails for index page\n\n- localhost-only mode\n\n- property editor\n\t- for button group: decode array attributes from property editor\n\t\t- BUG: editing of array attributes is broken\n\t- broadcast control updates\n\t\t- delete the control, force the id, and broadcast update\n\t\t-- deleting control requires a separate command?  or a null value?\n\n- edit mode\n\t- drag resize\n\t- color picker\n\n- chart control\n\t- data source periodic run \n\t- time axis values ick\n\t- y axis min/max options\n\t- multiple data sources [a0,d1,random(100)]\n\t\t- best handled with push to the control id\n\t\t- control can ignore the update or note it to trigger refresh\n\n- server:\n\t- for viewer nodes: fetch remote data for a chart on demand\n\n- doc:\n\t- commander front page\n\t- getting started\n\t- server options\n\t\t- starting and stopping\n\n\t- customizing scripts\n\t- the panel editor\n\n\t- panel options\n\t\t- channel\n\t\t- title x and y\n\n\t- javascript: scripts\n\t\t- mustache templating\n\n\t- link to Commander on bitlash.net\n\t- button.attr() and slider.attr()\n\t\tmove()\n\t\ttoFront()\n\t\t- iterates across subelements\n\t\t- svg group?\n\t- examples\n\t- security & auth\n\n- detect serial port closure and reconnect\n\t- reconnect button\n- detect socket.io port closure and reconnect\n\n- twitter integration\n\t- server credentials/auth/sender\n\t- send tweet from client\n\t- receive tweets as commands?\n\n- datalogging\n\t- limit number of points per series\n\t- facility to write to disk\n\t- integrate with cosm for upload\n\n- controls\n\t- uploader button: click to upload a bitlash code file or url to the arduino\n\t\t- autorunnable\n\t- image, clickable to start/stop refresh\n\t- scrolling text panel\n\t- knob\n\t- syschat\n\t- image\n\n- examples\n\t- synth\n\t- piano\n\t- trafficlight\n\t- elevator\n\t- security alarm system\n\t- train set\n\t- remote doorbell\n\t- send text command from keyboard\n\t- lunch bell\n\n- revisit default sizes as % parent width/height\n\n- improve operation without arduino connected\n\n- alert delivery\n\t- http://fabien-d.github.com/alertify.js/\n\t- sms\n\t- email\n\n- remote ethernet- and wifi- connected arduinos\n\t- redis pipe command sink for Commander\n\n\t- client POSTs to server-ip/update/:id/:value for the upstream path\n\t- server POSTs bitlash commands to arduino\n\t\t- how to configure IP and port for remote bitlash\t\n\t- security\n\t\t- tls isn't available\n\t\t- ip whitelist\n\t\t- shared secret in the message\n\t- firewall\n\t\t- need continuous connection like redis client\n\n\t- multiple arduino support\n\t\t- command steering\n\t\t- node registry / configuration\n\t\t- ip-accept list\n\t\t\t[['bitlash1', '192.168.1.17'], ...]\n\t\t\t- scripts addressed to bitlash1: would go to 192.168.1.17\n\n\t- how to let heroku server know it can't dispatch to local bitlash\n\n- Incoming OSC\n\t- map to controls by id\n\t",
  "readmeFilename": "README.md",
  "_id": "bitlash-commander@0.0.9",
  "_from": "bitlash-commander@*"
}
